<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<StackPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.emsi.subtracker.controllers.RegisterController"
           style="-fx-background-color: #0F0F0F;"
           prefHeight="768" prefWidth="1280">
    
    <!-- CONTAINER PRINCIPAL -->
    <VBox alignment="CENTER" spacing="20" maxWidth="550" maxHeight="700"
          style="-fx-background-color: #1A1A1A; -fx-background-radius: 16; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.4), 20, 0, 0, 4);">
        <padding>
            <Insets top="40" right="40" bottom="40" left="40"/>
        </padding>
        
        <!-- HEADER -->
        <VBox alignment="CENTER" spacing="8">
            <Label text="Créer un compte" style="-fx-text-fill: #FFFFFF; -fx-font-size: 28; -fx-font-weight: bold;"/>
            <Label text="Rejoignez SubTracker aujourd'hui" style="-fx-text-fill: #A0A0A0; -fx-font-size: 14;"/>
        </VBox>
        
        <!-- FORMULAIRE SCROLLABLE -->
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-background: transparent;" VBox.vgrow="ALWAYS">
            <VBox spacing="20">
                <!-- Infos de base -->
                <VBox spacing="10">
                    <Label text="INFORMATIONS DE BASE" style="-fx-text-fill: #6C63FF; -fx-font-size: 11; -fx-font-weight: bold;"/>
                    
                    <!-- Ligne 1: Username & Email -->
                    <HBox spacing="15">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="NOM D'UTILISATEUR" style="-fx-text-fill: #A0A0A0; -fx-font-size: 10; -fx-font-weight: bold;"/>
                            <TextField fx:id="usernameField" promptText="Pseudo"
                                      style="-fx-background-color: #252525; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 8; -fx-padding: 10; -fx-font-size: 13;"/>
                        </VBox>
                        
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="EMAIL" style="-fx-text-fill: #A0A0A0; -fx-font-size: 10; -fx-font-weight: bold;"/>
                            <TextField fx:id="emailField" promptText="email@ex.com"
                                      style="-fx-background-color: #252525; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 8; -fx-padding: 10; -fx-font-size: 13;"/>
                        </VBox>
                    </HBox>
                    
                    <!-- Ligne 2: Password & Confirm -->
                    <HBox spacing="15">
                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="MOT DE PASSE" style="-fx-text-fill: #A0A0A0; -fx-font-size: 10; -fx-font-weight: bold;"/>
                            <PasswordField fx:id="passwordField" promptText="******"
                                          style="-fx-background-color: #252525; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 8; -fx-padding: 10; -fx-font-size: 13;"/>
                        </VBox>

                        <VBox spacing="5" HBox.hgrow="ALWAYS">
                            <Label text="CONFIRMER" style="-fx-text-fill: #A0A0A0; -fx-font-size: 10; -fx-font-weight: bold;"/>
                            <PasswordField fx:id="confirmPasswordField" promptText="******"
                                          style="-fx-background-color: #252525; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 8; -fx-padding: 10; -fx-font-size: 13;"/>
                        </VBox>
                    </HBox>
                </VBox>
                
                <!-- Type de compte -->
                <VBox spacing="12">
                    <Label text="TYPE DE COMPTE" style="-fx-text-fill: #6C63FF; -fx-font-size: 11; -fx-font-weight: bold;"/>
                    <HBox spacing="15">
                        <RadioButton fx:id="individualRadio" text="Compte Individuel" selected="true" onAction="#onAccountTypeChanged" style="-fx-text-fill: white; -fx-font-size: 13;">
                            <toggleGroup>
                                <ToggleGroup fx:id="accountTypeGroup"/>
                            </toggleGroup>
                        </RadioButton>
                        <RadioButton fx:id="familyRadio" text="Compte Familial (jusqu'à 5 membres)" toggleGroup="$accountTypeGroup" onAction="#onAccountTypeChanged" style="-fx-text-fill: white; -fx-font-size: 13;"/>
                    </HBox>
                </VBox>
                
                <!-- Section Famille (visible si familial) -->
                <VBox fx:id="familyMembersContainer" spacing="15" managed="false" visible="false">
                    <Separator style="-fx-background-color: #333;"/>
                    <Label text="MEMBRES DE LA FAMILLE" style="-fx-text-fill: #6C63FF; -fx-font-size: 11; -fx-font-weight: bold;"/>
                    <VBox fx:id="membersVBox" spacing="12"/>
                    <Button fx:id="addMemberButton" text="+ Ajouter un membre" onAction="#onAddMemberClick"
                           style="-fx-background-color: transparent; -fx-border-color: #6C63FF; -fx-border-width: 2; -fx-border-radius: 8; -fx-text-fill: #6C63FF; -fx-padding: 10 20; -fx-cursor: hand; -fx-font-size: 13;"/>
                </VBox>
            </VBox>
        </ScrollPane>
        
        <!-- BOUTONS -->
        <VBox spacing="12">
            <Label fx:id="errorLabel" text="" wrapText="true" style="-fx-text-fill: #ff4c4c; -fx-font-size: 12;"/>
            <Label fx:id="successLabel" text="" wrapText="true" style="-fx-text-fill: #00b894; -fx-font-size: 12;"/>
            
            <Button fx:id="registerButton" text="CRÉER MON COMPTE" onAction="#handleRegister" maxWidth="Infinity"
                   style="-fx-background-color: #6C63FF; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14; -fx-background-radius: 8; -fx-padding: 14; -fx-cursor: hand;"/>
            
            <!-- Login Link -->
            <HBox alignment="CENTER" spacing="5">
                <Label text="Déjà un compte ?" style="-fx-text-fill: #A0A0A0; -fx-font-size: 13;"/>
                <Hyperlink text="Se connecter" onAction="#goToLogin" style="-fx-text-fill: #6C63FF; -fx-font-size: 13; -fx-font-weight: bold;"/>
            </HBox>
        </VBox>
    </VBox>
</StackPane>
